{% extends 'base.html' %}
{% block title %}Report{% endblock %}
{% block content %}
<h1 class="text-2xl font-semibold mb-2">Exam Report</h1>
<p class="text-gray-600 mb-6">Session ID: {{ session.id }}</p>
<div class="grid md:grid-cols-3 gap-4 mb-6">
	<div class="p-4 bg-white border rounded">
		<div class="text-sm text-gray-500">Total Questions</div>
		<div class="text-2xl font-semibold">{{ total }}</div>
	</div>
	<div class="p-4 bg-white border rounded">
		<div class="text-sm text-gray-500">Correct</div>
		<div class="text-2xl font-semibold text-emerald-600">{{ correct }}</div>
	</div>
	<div class="p-4 bg-white border rounded">
		<div class="text-sm text-gray-500">Score</div>
		<div class="text-2xl font-semibold">{{ '%.1f' % percentage }}% ({{ grade }})</div>
	</div>
</div>
<div class="space-y-4">
	{% for d in details %}
		<div class="bg-white border rounded p-4">
			<div class="font-semibold mb-2">Q{{ loop.index }}. {{ d.question.text }}</div>
			<div class="space-y-2">
				{% for opt in d.question.options %}
					<div class="flex items-center justify-between text-sm p-2 rounded border {{ 'border-emerald-300 bg-emerald-50 text-emerald-800' if d.correct_option and opt.id==d.correct_option.id else ( 'border-sky-300 bg-sky-50 text-sky-800' if d.selected and opt.id==d.selected.id else 'border-gray-200') }}">
						<span>{{ opt.text }}</span>
						<div class="flex items-center gap-2">
							{% if d.selected and opt.id==d.selected.id %}<span class="text-sky-700 text-xs">Selected</span>{% endif %}
							{% if d.correct_option and opt.id==d.correct_option.id %}<span class="text-emerald-700 text-xs">Correct</span>{% endif %}
						</div>
					</div>
				{% endfor %}
			</div>
		</div>
	{% endfor %}
</div>
{% endblock %}
