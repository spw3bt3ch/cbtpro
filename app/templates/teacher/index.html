{% extends 'base.html' %}
{% block title %}Teacher Panel{% endblock %}
{% block content %}
<div class="flex items-center justify-between mb-6">
	<div>
		<h1 class="text-2xl font-semibold">Teacher Dashboard</h1>
		<p class="text-gray-600">Create and manage your subjects and questions.</p>
	</div>
	<a class="bg-brand text-white px-4 py-2 rounded shadow-sm" href="{{ url_for('teacher.create_subject') }}">New Subject</a>
</div>
<div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-5">
	{% for s in subjects %}
		<div class="rounded-xl border bg-white p-5 shadow-sm hover:shadow-md transition">
			<div class="flex items-start justify-between gap-2">
				<div class="flex items-start gap-3">
					<div class="h-10 w-10 rounded-lg bg-brand/10 text-brand flex items-center justify-center font-semibold">{{ s.name[:1] }}</div>
					<div>
						<div class="font-semibold text-lg">{{ s.name }}</div>
						<div class="mt-1 flex flex-wrap items-center gap-2 text-xs text-gray-600">
							<span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-700 border border-emerald-200">{{ s.duration_minutes }} mins</span>
							<span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-sky-50 text-sky-700 border border-sky-200">{{ s.questions|length }} questions</span>
							<span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-purple-50 text-purple-700 border border-purple-200">{{ s.class_name or 'All classes' }}</span>
						</div>
					</div>
				</div>
				<div class="flex items-center gap-2 text-sm">
					<a href="{{ url_for('teacher.subject_detail', subject_id=s.id) }}" class="px-2 py-1 rounded border hover:bg-gray-50">Manage</a>
					<a href="{{ url_for('teacher.edit_subject', subject_id=s.id) }}" class="px-2 py-1 rounded border hover:bg-gray-50">Edit</a>
					<form method="post" action="{{ url_for('teacher.delete_subject', subject_id=s.id) }}">
						{{ delete_form.hidden_tag() }}
						<button class="px-2 py-1 rounded border border-red-300 text-red-600 hover:bg-red-50" onclick="return confirm('Delete subject? This cannot be undone.')">Delete</button>
					</form>
				</div>
			</div>
			<div class="mt-4 text-sm text-gray-700 line-clamp-2 min-h-[2.5rem]">{{ s.description or 'No description provided.' }}</div>
			<div class="mt-4 flex items-center justify-between">
				<a href="{{ url_for('teacher.add_question', subject_id=s.id) }}" class="text-brand text-sm hover:underline">Add Question</a>
				<a href="{{ url_for('student.start_exam', subject_id=s.id) }}" class="text-sm text-gray-600 hover:text-brand">Preview</a>
			</div>
		</div>
	{% else %}
		<div class="text-gray-500">Create your first subject.</div>
	{% endfor %}
</div>
{% endblock %}
